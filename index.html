<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prescott Summer Camp Timeline 2025</title>
    <style>
        :root {
            --nature-color: #4CAF50;
            --arts-color: #9C27B0;
            --sports-color: #FF9800;
            --theater-color: #E91E63;
            --stem-color: #2196F3;
            --general-color: #FFC107;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            padding: 20px;
            background-color: #f5f5f5;
            font-size: 16px;
        }

        .container {
            max-width: 1800px; /* Increased from 1600px */
            margin: 0 auto;
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            padding: 35px;
        }

        h1 {
            text-align: center;
            margin-bottom: 50px;
            color: #333;
            font-size: 48px; /* 50% larger than previous 32px */
        }

        .legend {
            display: flex;
            flex-wrap: wrap;
            gap: 40px; /* 50% larger than previous 26px */
            margin-bottom: 50px;
            justify-content: center;
        }

        .legend-item {
            display: flex;
            align-items: center;
            font-size: 27px; /* 50% larger than previous 18px */
        }

        .legend-color {
            width: 52px; /* 50% larger than previous 35px */
            height: 52px;
            margin-right: 21px; /* 50% larger than previous 14px */
            border-radius: 10px; /* 50% larger than previous 7px */
        }

        .chart-container {
            overflow-x: auto;
            margin-top: 50px;
            position: relative;
            width: 100%;
        }
        
        /* Add horizontal scrollbar only when needed */
        @media (max-width: 1800px) {
            .chart-container {
                overflow-x: scroll;
            }
        }

        .chart {
            position: relative;
            min-height: 1800px; /* Increased height to fit all camps */
            width: 100%; /* Use full width */
            margin-top: 130px;
            overflow-x: visible; /* Ensure content doesn't get cut off */
            padding-right: 100px; /* Add padding on the right side */
        }

        .timeline {
            position: absolute;
            top: 0;
            left: 400px;
            right: 50px; /* Added margin on right side */
            height: 100%;
            display: grid;
            grid-template-columns: repeat(92, 1fr); /* 92 days from May 1 to July 31 */
        }

        .timeline-label {
            position: absolute;
            top: -78px;
            width: 120px; /* Fixed width */
            margin-left: -60px; /* Center the label */
            text-align: center;
            font-size: 25px;
            font-weight: bold;
            color: #555;
        }

        .timeline-grid {
            border-right: 2px solid #ddd; /* Thicker grid lines */
            height: 100%;
        }

        .camp-labels {
            position: absolute;
            top: 0;
            left: 0;
            width: 400px; /* 50% larger than previous 262px */
            height: 100%;
        }

        .camp-label {
            position: absolute;
            height: 100px; /* Increased from 78px to match row height */
            padding-right: 25px;
            text-align: right;
            display: flex;
            align-items: center;
            justify-content: flex-end;
            font-size: 25px;
            font-weight: bold;
            color: #333;
            width: 100%;
        }

        .camp-row {
            position: absolute;
            left: 400px; /* 50% larger than previous 262px */
            height: 100px; /* Increased from 78px to accommodate taller bars */
            right: 0;
            border-bottom: 1px solid #eee;
        }

        .camp-bar {
            position: absolute;
            height: 80px; /* Increased from 52px to allow for two lines of text */
            top: 10px; /* Adjusted to center in the taller row */
            border-radius: 10px;
            color: white;
            font-size: 22px; /* Slightly reduced for better fit */
            display: flex;
            flex-direction: column; /* Changed to column to stack text vertically */
            align-items: center;
            justify-content: center;
            padding: 5px 25px;
            text-align: center;
            cursor: pointer;
            box-shadow: 0 4px 14px rgba(0, 0, 0, 0.2);
            overflow: hidden;
            transition: opacity 0.3s, filter 0.3s, transform 0.1s;
        }

        .camp-bar .date-range {
            font-weight: bold;
            margin-bottom: 5px;
            font-size: 20px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            width: 100%;
            margin: 0 0 5px 0;
            padding: 0;
        }

        .camp-bar .description {
            width: 100%;
            white-space: normal; /* Allow wrapping */
            overflow: hidden;
            text-overflow: ellipsis;
            display: -webkit-box;
            -webkit-line-clamp: 2; /* Limit to 2 lines */
            -webkit-box-orient: vertical;
            font-size: 20px;
            line-height: 1.2;
        }

        .camp-bar:hover {
            filter: brightness(110%);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
            z-index: 100;
        }

        .camp-bar:active {
            transform: scale(0.98);
        }

        .camp-bar.deselected {
            opacity: 0.4;
            filter: grayscale(70%);
        }

        .tooltip {
            position: fixed;
            background-color: rgba(0, 0, 0, 0.9);
            color: white;
            padding: 21px 32px; /* 50% larger than previous 14px 21px */
            border-radius: 10px; /* 50% larger than previous 7px */
            font-size: 25px; /* 50% larger than previous 17px */
            z-index: 1000;
            pointer-events: none;
            display: none;
            max-width: 800px; /* 50% larger than previous 525px */
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        /* Instructions for touch users */
        .touch-instructions {
            text-align: center;
            margin: 20px 0;
            padding: 15px;
            background-color: #f8f8f8;
            border-radius: 10px;
            border: 1px solid #ddd;
            font-size: 18px;
            color: #333;
        }

        .nature { background-color: var(--nature-color); }
        .arts { background-color: var(--arts-color); }
        .sports { background-color: var(--sports-color); }
        .theater { background-color: var(--theater-color); }
        .stem { background-color: var(--stem-color); }
        .general { background-color: var(--general-color); }

        .filter-section {
            margin-bottom: 50px; /* 50% larger than previous 35px */
            display: flex;
            flex-wrap: wrap;
            gap: 40px; /* 50% larger than previous 26px */
            justify-content: center;
        }

        .checkbox-container {
            display: flex;
            align-items: center;
            gap: 14px; /* 50% larger than previous 9px */
            font-size: 25px; /* 50% larger than previous 17px */
        }

        input[type="checkbox"] {
            margin-right: 14px; /* 50% larger than previous 9px */
            transform: scale(2); /* Make checkboxes even bigger */
        }

        button {
            background-color: #4CAF50;
            color: white;
            border: none;
            padding: 21px 40px; /* 50% larger than previous 14px 26px */
            border-radius: 10px; /* 50% larger than previous 7px */
            cursor: pointer;
            font-weight: bold;
            font-size: 25px; /* 50% larger than previous 17px */
        }

        button:hover {
            background-color: #388E3C;
        }

        .date-range {
            display: flex;
            flex-wrap: wrap;
            gap: 25px; /* 50% larger than previous 17px */
            align-items: center;
            justify-content: center;
            margin-bottom: 50px; /* 50% larger than previous 35px */
            font-size: 25px; /* 50% larger than previous 17px */
        }

        input[type="date"], input[type="number"] {
            padding: 15px 25px; /* 50% larger than previous 10px 17px */
            border: 1px solid #ddd;
            border-radius: 10px; /* 50% larger than previous 7px */
            font-size: 24px; /* 50% larger than previous 16px */
        }

        @media (max-width: 768px) {
            .camp-label {
                font-size: 14px; /* Increased from 10px */
            }
            
            .camp-bar {
                font-size: 12px; /* Increased from 9px */
                padding: 0 9px; /* Increased from 5px */
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Prescott Summer Camp Timeline 2025</h1>
        
        <div class="touch-instructions">
            <strong>Touch Screen Instructions:</strong> Tap a camp to select/deselect it. Long press (touch and hold) on a camp to view details.
        </div>

        <div class="legend">
            <div class="legend-item">
                <div class="legend-color nature"></div>
                <div>Nature/Outdoor</div>
            </div>
            <div class="legend-item">
                <div class="legend-color arts"></div>
                <div>Arts/Crafts</div>
            </div>
            <div class="legend-item">
                <div class="legend-color sports"></div>
                <div>Sports/Adventure</div>
            </div>
            <div class="legend-item">
                <div class="legend-color theater"></div>
                <div>Theater/Performance</div>
            </div>
            <div class="legend-item">
                <div class="legend-color stem"></div>
                <div>STEM/Education</div>
            </div>
            <div class="legend-item">
                <div class="legend-color general"></div>
                <div>General/Mixed</div>
            </div>
        </div>

        <div class="chart-container">
            <div class="chart" id="camps-chart">
                <!-- Will be populated by JavaScript -->
            </div>
        </div>

        <div class="tooltip" id="tooltip"></div>
    </div>

    <script>
        // Camp data with type information and selection state - updated from CSV
        const campsData = [
            {
                campName: "Summer Art Camp Session 3 Grades 1-4",
                shortName: "Summer Art Camp",
                organization: "Mountain Artists Guild - alomst sold out",
                ageRange: "Grades 1-4",
                startDate: "2025-06-16",
                endDate: "2025-06-20",
                description: "Art",
                type: "arts", // Arts/Crafts
                selected: true,
                hours: "9:30 am–3:30 pm or 1:30–3:30 pm",
                schedule: "June 16th - 20th",
                fullOrHalf: "Both",
                cost: "",
                location: "",
                registrationLink: ""
            },
            {
                campName: "College for Kids",
                shortName: "College for Kids",
                organization: "Yavapai College",
                ageRange: "5-17",
                startDate: "2025-06-01", // Approximation of "Early June"
                endDate: "2025-07-25", // Approximation of "Late July"
                description: "not posted yet  (check late April).  -  STEM, art, language, bike riding",
                type: "general", // General/Mixed
                selected: true,
                hours: "Varies (2-3 hrs/day, Mon-Thu)",
                schedule: "Early June – Late July 2025",
                fullOrHalf: "Half-Day",
                cost: "",
                location: "",
                registrationLink: ""
            },
            {
                campName: "James Family YMCA Summer Camp",
                shortName: "YMCA Summer Camp",
                organization: "Prescott YMCA",
                ageRange: "K - Age 12",
                startDate: "2025-05-27",
                endDate: "2025-07-30",
                description: "not posted yet  (check late April)",
                type: "general", // General/Mixed
                selected: true,
                hours: "",
                schedule: "May 27 – July 30, 2025",
                fullOrHalf: "",
                cost: "",
                location: "",
                registrationLink: ""
            },
            {
                campName: "Matilda Jr. Theater Camp",
                shortName: "Matilda Jr. Theater",
                organization: "Prescott Valley Performing Arts",
                ageRange: "6-17",
                startDate: "2025-06-02",
                endDate: "2025-06-21",
                description: "Musical theater, acting, stagecraft",
                type: "theater", // Theater/Performance
                selected: true,
                hours: "9:00 am–3:00 pm",
                schedule: "June 2-21, 2025",
                fullOrHalf: "Full-Day",
                cost: "",
                location: "",
                registrationLink: ""
            },
            {
                campName: "Newsies Jr. Theater Camp",
                shortName: "Newsies Jr. Theater",
                organization: "Prescott Valley Performing Arts",
                ageRange: "6-17",
                startDate: "2025-07-07",
                endDate: "2025-07-26",
                description: "Musical theater, acting, performance",
                type: "theater", // Theater/Performance
                selected: true,
                hours: "9:00 am–3:00 pm",
                schedule: "July 7-26, 2025",
                fullOrHalf: "Full-Day",
                cost: "",
                location: "",
                registrationLink: ""
            },
            {
                campName: "Summer Sprouts Nature Camp",
                shortName: "Sprouts Nature Camp",
                organization: "Highlands Center for Natural History",
                ageRange: "4-6",
                startDate: "2025-06-02",
                endDate: "2025-07-18",
                description: "Outdoor ecology and nature crafts",
                type: "nature", // Nature/Outdoor
                selected: true,
                hours: "8:00 am–12:00 pm",
                schedule: "June 2nd -July 18th 2025",
                fullOrHalf: "Half-Day",
                cost: "",
                location: "",
                registrationLink: ""
            },
            {
                campName: "ZooCamp",
                shortName: "ZooCamp",
                organization: "Heritage Park Zoological Sanctuary",
                ageRange: "6-12",
                startDate: "2025-06-02",
                endDate: "2025-07-25",
                description: "Behind-the-scenes zoo, animal games, crafts",
                type: "nature", // Nature/Outdoor
                selected: true,
                hours: "8:30 am–3:00 pm",
                schedule: "Weekly: Jun 2-Jul 25, 2025",
                fullOrHalf: "Full-Day",
                cost: "",
                location: "",
                registrationLink: ""
            },
            {
                campName: "Soccer: FOUNDATIONAL SKILLS CAMP",
                shortName: "Soccer Skills Camp",
                organization: "Challenger Sports: AYSO 172 PRESCOTT",
                ageRange: "3-12",
                startDate: "2025-06-09",
                endDate: "2025-06-13",
                description: "Players will work on technical foundational skills in a fun and safe environment",
                type: "sports", // Sports/Adventure
                selected: true,
                hours: "9:00 am -12:00pm & 1:00pm - 4:00pm",
                schedule: "6/9/25 - 6/13/25",
                fullOrHalf: "Half-Day: morning or afternoon",
                cost: "",
                location: "",
                registrationLink: ""
            },
            {
                campName: "AZ Dreams Gymnastic",
                shortName: "AZ Dreams Gymnastic",
                organization: "AZ Dreams Gymnastics",
                ageRange: "",
                startDate: "2025-06-02",
                endDate: "2025-07-25",
                description: "",
                type: "sports", // Sports/Adventure
                selected: true,
                hours: "9:00am - 5:00pm",
                schedule: "June 2nd 2025 - July 25th 2025",
                fullOrHalf: "Full and Half days",
                cost: "",
                location: "",
                registrationLink: ""
            },
            {
                campName: "Lego Camp",
                shortName: "Lego Camp",
                organization: "John's Box of Bricks",
                ageRange: "",
                startDate: "2025-06-01", // Approximation for "June"
                endDate: "2025-07-31", // Approximation for "July"
                description: "not posted yet  -  date and reg should be up early April (6 weeks total)",
                type: "stem", // STEM/Education
                selected: true,
                hours: "",
                schedule: "June - July",
                fullOrHalf: "",
                cost: "",
                location: "",
                registrationLink: ""
            }
        ];

        // Constants for chart
        const ROW_HEIGHT = 100; // Increased from 78 to match taller rows
        const CHART_START_DATE = new Date('2025-05-01'); // Changed to May 1
        const CHART_END_DATE = new Date('2025-07-31'); // Changed to July 31
        const DAYS_IN_CHART = (CHART_END_DATE - CHART_START_DATE) / (1000 * 60 * 60 * 24);

        // Function to initialize the chart
        function initChart() {
            const chart = document.getElementById('camps-chart');
            const chartWidth = chart.offsetWidth - 150; // Subtract label width
            
            // Create timeline grid
            const timeline = document.createElement('div');
            timeline.className = 'timeline';
            
            // Create timeline labels and grid lines
            // For May, June, July - create labels at the start and middle of each month
            const monthStarts = [
                new Date(2025, 4, 1),  // May 1
                new Date(2025, 4, 15), // May 15
                new Date(2025, 5, 1),  // June 1
                new Date(2025, 5, 15), // June 15
                new Date(2025, 6, 1),  // July 1
                new Date(2025, 6, 15), // July 15
                new Date(2025, 6, 31)  // July 31
            ];
            
            monthStarts.forEach(date => {
                const dayIndex = Math.floor((date - CHART_START_DATE) / (1000 * 60 * 60 * 24));
                
                const grid = document.createElement('div');
                grid.className = 'timeline-grid';
                grid.style.gridColumn = dayIndex + 1;
                
                const label = document.createElement('div');
                label.className = 'timeline-label';
                
                // Adjust position calculation to ensure labels stay within bounds
                const leftPos = (dayIndex / DAYS_IN_CHART) * 100;
                
                // For the last label (July 31), make sure it's not positioned too far right
                if (date.getDate() === 31 && date.getMonth() === 6) {
                    label.style.left = 'calc(' + leftPos + '% - 80px)';
                } else {
                    label.style.left = leftPos + '%';
                }
                
                label.textContent = formatDate(date);
                
                timeline.appendChild(label);
                timeline.appendChild(grid);
            });
            
            chart.appendChild(timeline);
            
            // Create camp labels container
            const campLabels = document.createElement('div');
            campLabels.className = 'camp-labels';
            chart.appendChild(campLabels);
            
            // Set chart height based on number of camps
            chart.style.height = `${campsData.length * ROW_HEIGHT}px`;
            
            // Create camp rows
            let rowIndex = 0;
            campsData.forEach(camp => {
                // Create label
                const label = document.createElement('div');
                label.className = 'camp-label';
                label.textContent = camp.shortName;
                label.style.top = `${rowIndex * ROW_HEIGHT}px`;
                campLabels.appendChild(label);
                
                // Create row
                const row = document.createElement('div');
                row.className = 'camp-row';
                row.style.top = `${rowIndex * ROW_HEIGHT}px`;
                chart.appendChild(row);
                
                // Create bar for the camp
                createCampBar(camp, row, rowIndex);
                
                rowIndex++;
            });
        }

        // Function to create a camp bar
        function createCampBar(camp, row, rowIndex) {
            const startDate = new Date(camp.startDate);
            const endDate = new Date(camp.endDate);
            
            // Calculate position
            const chartWidth = document.querySelector('.timeline').offsetWidth;
            const startDays = (startDate - CHART_START_DATE) / (1000 * 60 * 60 * 24);
            const endDays = (endDate - CHART_START_DATE) / (1000 * 60 * 60 * 24);
            const duration = endDays - startDays;
            
            // Adjust calculation to account for the right margin
            const totalDays = DAYS_IN_CHART;
            const adjustedDays = totalDays * 0.985; // Use 98.5% of the width to leave room
            
            const startPercent = (startDays / adjustedDays) * 100;
            const widthPercent = (duration / adjustedDays) * 100;
            
            // Create the bar
            const bar = document.createElement('div');
            bar.className = `camp-bar ${camp.type}`;
            
            // Set selection state
            if (!camp.selected) {
                bar.classList.add('deselected');
            }
            
            // Create date range element
            const dateRange = document.createElement('div');
            dateRange.className = 'date-range';
            const startDateText = formatDate(startDate);
            const endDateText = formatDate(endDate);
            dateRange.textContent = `${startDateText} - ${endDateText}`;
            
            // Create description element
            const description = document.createElement('div');
            description.className = 'description';
            description.textContent = camp.description || "";
            
            // Add both elements to the bar
            bar.appendChild(dateRange);
            bar.appendChild(description);
            
            bar.style.left = `${startPercent}%`;
            bar.style.width = `${widthPercent}%`;
            bar.dataset.type = camp.type;
            bar.dataset.campIndex = rowIndex; // Store camp index for selection toggle
            bar.dataset.showingTooltip = 'false'; // For touch interaction
            
            // Add tooltip data with all available information
            bar.dataset.tooltip = `
                <strong>${camp.campName}</strong><br>
                <strong>Organization:</strong> ${camp.organization || 'Not specified'}<br>
                <strong>Ages:</strong> ${camp.ageRange || 'Not specified'}<br>
                <strong>Dates:</strong> ${camp.schedule || (formatDate(startDate) + ' - ' + formatDate(endDate))}<br>
                <strong>Hours:</strong> ${camp.hours || 'Not specified'}<br>
                <strong>Format:</strong> ${camp.fullOrHalf || 'Not specified'}<br>
                <strong>Description:</strong> ${camp.description || 'Not specified'}<br>
                ${camp.cost ? `<strong>Cost:</strong> ${camp.cost}<br>` : ''}
                ${camp.location ? `<strong>Location:</strong> ${camp.location}<br>` : ''}
                ${camp.registrationLink ? `<strong>Registration:</strong> ${camp.registrationLink}<br>` : ''}
                <em>Tap to select/deselect this camp<br>
                Long press to keep this info open</em>
            `;
            
            // Add tooltip event listeners for mouse
            bar.addEventListener('mousemove', showTooltip);
            bar.addEventListener('mouseout', hideTooltip);
            
            // Add tooltip event listeners for touch
            bar.addEventListener('touchstart', handleTouchStart);
            bar.addEventListener('touchend', handleTouchEnd);
            bar.addEventListener('touchmove', handleTouchMove);
            
            // Add click event for selection toggle
            bar.addEventListener('click', toggleCampSelection);
            
            row.appendChild(bar);
        }

        // Function to toggle camp selection
        function toggleCampSelection(e) {
            const campIndex = parseInt(this.dataset.campIndex);
            
            // Toggle selected state in data
            campsData[campIndex].selected = !campsData[campIndex].selected;
            
            // Update visual state
            if (campsData[campIndex].selected) {
                this.classList.remove('deselected');
            } else {
                this.classList.add('deselected');
            }
            
            // Update tooltip
            this.dataset.tooltip = this.dataset.tooltip.replace(
                `<em>Click to ${!campsData[campIndex].selected ? 'deselect' : 'select'} this camp</em>`,
                `<em>Click to ${campsData[campIndex].selected ? 'deselect' : 'select'} this camp</em>`
            );
            
            // Hide tooltip to prevent stale info
            hideTooltip();
        }

        // Format date as Month Day
        function formatDate(date) {
            const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
            const month = months[date.getMonth()];
            const day = date.getDate();
            return `${month} ${day}`;
        }

        // Tooltip functions
        function showTooltip(e) {
            const tooltip = document.getElementById('tooltip');
            tooltip.innerHTML = this.dataset.tooltip;
            
            // Get the position and dimensions of the camp bar
            const barRect = this.getBoundingClientRect();
            
            // Show the tooltip first (but not visible) to get its dimensions
            tooltip.style.visibility = 'hidden';
            tooltip.style.display = 'block';
            
            // Get the tooltip dimensions
            const tooltipRect = tooltip.getBoundingClientRect();
            
            // Calculate position for tooltip
            // Try to position it above the camp bar
            let top = barRect.top - tooltipRect.height - 10;
            
            // If that would put it off the top of the screen, position it below the bar instead
            if (top < 10) {
                top = barRect.bottom + 10;
            }
            
            // Center the tooltip horizontally with the cursor or tap point
            let left;
            if (e.type === 'touchstart') {
                // For touch events, center over the bar
                left = barRect.left + (barRect.width / 2) - (tooltipRect.width / 2);
            } else {
                // For mouse events, follow the cursor
                left = e.clientX - (tooltipRect.width / 2);
            }
            
            // Ensure tooltip doesn't go off the left or right edge of the screen
            if (left < 10) {
                left = 10;
            } else if (left + tooltipRect.width > window.innerWidth - 10) {
                left = window.innerWidth - tooltipRect.width - 10;
            }
            
            // Apply the calculated position
            tooltip.style.left = `${left}px`;
            tooltip.style.top = `${top + window.scrollY}px`; // Add scrollY to account for page scroll
            
            // Make the tooltip visible
            tooltip.style.visibility = 'visible';
            
            // If this is a long press/touch event, prevent the regular click event
            if (e.type === 'touchstart') {
                this.dataset.showingTooltip = 'true';
                e.preventDefault();
            }
        }

        function hideTooltip() {
            document.getElementById('tooltip').style.display = 'none';
        }
        
        // Touch handler for the tooltip
        let longPressTimer;
        
        function handleTouchStart(e) {
            const bar = this;
            // Start a timer for long press
            longPressTimer = setTimeout(function() {
                // This is a long press, show the tooltip
                showTooltip.call(bar, e);
            }, 500); // 500ms is a common threshold for long press
        }
        
        function handleTouchEnd() {
            // Clear the long press timer
            clearTimeout(longPressTimer);
            
            // If we were showing a tooltip, hide it
            if (this.dataset.showingTooltip === 'true') {
                this.dataset.showingTooltip = 'false';
                hideTooltip();
            }
        }
        
        function handleTouchMove() {
            // If the user moves their finger, cancel the long press
            clearTimeout(longPressTimer);
        }

        function applyFilters() {
            const minAge = parseInt(document.getElementById('min-age').value);
            const maxAge = parseInt(document.getElementById('max-age').value);
            
            console.log(`Filtering for age range: ${minAge}-${maxAge}`);
            
            // Get all camp bars
            const campBars = document.querySelectorAll('.camp-bar');
            
            // Loop through each camp bar and check if it should be shown
            campBars.forEach(bar => {
                let show = true;
                const campId = bar.dataset.campIndex;
                const camp = campsData[campId];
                
                // Extract min and max ages from the camp data
                let campMinAge = 0;
                let campMaxAge = 18;
                
                // Parse age range from the camp data
                if (camp.ageRange) {
                    // For "Grades 1-4" format
                    if (camp.ageRange.includes("Grade")) {
                        const gradeMatch = camp.ageRange.match(/(\d+)(?:\s*-\s*|\s*to\s*)(\d+)/);
                        if (gradeMatch) {
                            // Rough conversion: Grade 1 ≈ age 6, etc.
                            campMinAge = parseInt(gradeMatch[1]) + 5;
                            campMaxAge = parseInt(gradeMatch[2]) + 5;
                        } else {
                            const singleGrade = camp.ageRange.match(/Grade\s*(\d+)/i);
                            if (singleGrade) {
                                campMinAge = parseInt(singleGrade[1]) + 5;
                                campMaxAge = campMinAge;
                            }
                        }
                    }
                    // For "K - Age 12" format
                    else if (camp.ageRange.includes("K")) {
                        campMinAge = 5; // Kindergarten ≈ age 5
                        const maxMatch = camp.ageRange.match(/(\d+)/);
                        if (maxMatch) {
                            campMaxAge = parseInt(maxMatch[0]);
                        }
                    }
                    // For "5-17" format
                    else {
                        const ageMatch = camp.ageRange.match(/(\d+)(?:\s*-\s*|\s*to\s*)(\d+)/);
                        if (ageMatch) {
                            campMinAge = parseInt(ageMatch[1]);
                            campMaxAge = parseInt(ageMatch[2]);
                        } else {
                            const singleAge = camp.ageRange.match(/(\d+)/);
                            if (singleAge) {
                                campMinAge = parseInt(singleAge[0]);
                                campMaxAge = campMinAge;
                            }
                        }
                    }
                }
                
                // Apply age filters - check if there's any overlap between camp age range and filter range
                if (campMaxAge < minAge || campMinAge > maxAge) {
                    show = false;
                    console.log(`Hiding camp "${camp.shortName}" (ages ${campMinAge}-${campMaxAge}) - outside filter range ${minAge}-${maxAge}`);
                }
                
                // Apply visibility
                bar.style.display = show ? 'flex' : 'none';
            });
        }

        function resetFilters() {
            document.getElementById('min-age').value = 6;
            document.getElementById('max-age').value = 7;
            
            applyFilters();
        }

        document.addEventListener('DOMContentLoaded', function() {
            console.log("DOM loaded - initializing timeline...");
            
            // Initialize chart
            initChart();
        });
    </script>
</body>
</html>